---
sidebar_position: 2
---

# サーバー用コマンド

サーバーを構築し、絵文字を参加者向けに配信したい場合はこちら。

:::warning
このページの内容は、シングルプレイのみで遊ぶ場合は参照する必要がありません。
また、マルチプレイサーバーの構築方法がわかっていることを前提としています。
:::

## 「サーバー」という用語について

このページでは、「サーバー」という単語が複数出てきます。定義を整理しておきます。

- **Misskeyサーバー**：Misskeyで稼働しているサーバーの総称です。
- **MInecraftサーバー**：マインクラフトでマルチプレイを行えるように構築し、稼働しているサーバーの総称です。

このページで断りなく「サーバー」といった場合、それはMinecraftサーバーのことを指します。

## サーバーにMissmojiを導入する

サーバーに対し、通常のMODと同じ方法でMissmojiを導入することができます。

参加者は、Missmojiを導入していなくてもサーバーに参加し、通常通りチャットすることが可能です。この場合、該当する参加者のチャット欄にMissmojiのインストールを促すメッセージが出てきます。このメッセージはconfigからオフにすることができます。

## サーバーコマンド

### システムコマンド

#### `/missmoji server version`

サーバーのバージョンを確認します。OP権限無しで実行できます。

#### `/missmoji server list`

参加中のサーバーが導入している絵文字一覧を表示します。OP権限無しで実行できます。

#### `/missmoji server config`

サーバーコンフィグを操作できます。GUI画面からも変更できるため、基本的にこのコマンドを使用する必要はありません。

編集できる項目は、＜ここに新しいページへのリンクが入るであろう＞をご覧ください。

##### 使用例

```
/missmoji server config allow-external-emojis false
```

### 絵文字をサーバーに追加する

サーバーに絵文字を追加した場合、そのサーバーの参加者がMissmojiを導入している場合は自動的に導入を開始します。

#### `/missmoji server list`

今入っているサーバー絵文字の一覧を表示することができます。

#### `/missmoji server <enable/disable> <絵文字名またはemojipack名>`

特定の絵文字またはemojipackの有効（enable）、無効（disable）を切り替えます。

#### `/missmoji server add <URLまたはローカルディレクトリの名前> (絵文字名)`

サーバーに、一つだけ絵文字を追加することができます。構文は`/missmoji client add`と変わりませんが、**URLを指定した場合にこのコマンドはデフォルトの設定では絵文字をサーバーに保管せず、画像の場所のみを記録します**。この挙動はconfigで変更可能です。

#### `/mossmoji server update <diff/all/single> <single -> name>`

サーバーに保存してある絵文字のアップデート作業を行います。構文は`missmoji client update`と変わりませんが、**このコマンドはでフルとの設定では絵文字をサーバーに保管せず、画像の場所および「更新が必要である」という情報のみを記録します**。

## シングルプレイ時の挙動

シングルプレイにおいて`/missmoji server`を実行することも可能です。ただし、シングルプレイにおいてこのコマンドを実行した場合、**ワールドごとに絵文字を保存する**という挙動になります。そのため、基本的にはほとんど意味がありません。

:::danger ワールド・MODパック配布の予定がある方へ
Missmojiを用いてダウンロードした絵文字をワールドやEmojipacksに画像として含め、それを配布すると著作権法違反になる恐れがあります。将来的にワールドを配布する目的を持って`/missmoji server add`などのコマンドを実行する場合は、必ず著作権上の問題が発生しないかを確認し、自己の責任において行ってください。
:::